<!DOCTYPE html>
<html class="loading" dir="ltr" lang="zh-Hans">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>7.2.3.1 access-class 命令 </title>
    <!-- Content -->
    <link rel="stylesheet" type="text/css" href="../../common-ext/styles/page.css"/>
    <script type="text/javascript" src="../../common-ext/scripts/jquery-2.1.0.min.js"></script>
    <script type="text/javascript" src="../../common-ext/scripts/permission.js"></script>
    <script type="text/javascript" src="../../common-ext/scripts/page.js"></script>
    <script type="text/javascript" src="media/override.js"></script>
    <script>
      var media_transcript_file = "media_7.2.3.1_longdesc.txt";
    </script>
  </head>
  <body>
    <div id="text-container" role="main">
      <div id="text">
        <h1>access-class 命令 </h1>
        <div>
          <p>您可以通过限制 VTY 访问来改善管理线路的安全性。通过限制 VTY 访问，您可以定义哪些 IP 地址能够通过远程访问路由器 EXEC 进程。您可以使用 ACL 和在 VTY 线路上配置的 <b>access-class</b> 语句指定允许哪些 IP 地址远程访问您的路由器。可以将该技术与 SSH 一同使用，以进一步提高管理访问的安全性。</p>
          <p></p>
          <p>线路配置模式中配置的 <b>access-class </b>命令可限制特定 VTY（接入思科设备）与访问列表中地址之间的传入和传出连接。 </p>
          <p></p>
          <p><b>access-class</b> 命令的语法是：</p>
          <p></p>
          <p>
            <span class="cmd">Router(config-line)# </span>
            <span class="cmd">
              <b>access-class</b>
            </span>
            <span class="cmd"></span>
            <span class="cmd">
              <i>access-list-number</i>
            </span>
            <span class="cmd"> {</span>
            <span class="cmd">
              <b>in </b>
            </span>
            <span class="cmd">[</span>
            <span class="cmd">
              <b>vrf-also</b>
            </span>
            <span class="cmd">]</span>
            <span class="cmd">
              <b></b>
            </span>
            <span class="cmd">|</span>
            <span class="cmd">
              <b> out</b>
            </span>
            <span class="cmd">}</span>
          </p>
          <p></p>
          <p>参数 <b>in</b> 限制访问列表中的地址和思科设备之间的传入连接，而参数 <b>out</b> 则限制特定思科设备与访问列表中地址之间的传出连接。 </p>
          <p></p>
          <p>一个允许一组地址访问 VTY 线路 0 到 4 的示例如图 1 所示。将图中的 ACL 配置为允许网络 192.168.10.0 访问 VTY 线路 0 到 4，但拒绝所有其他网络。 </p>
          <p></p>
          <p>当配置 VTY 上的访问列表时，应该考虑以下几点：</p>
          <p></p>
          <p>
            <ul>
              <li>命名访问列表和编号访问列表都可以应用于 VTY。</li>
            </ul>
          </p>
          <p>
            <ul>
              <li>应该在所有 VTY 上设置相同的限制，因为用户可以尝试连接到任意 VTY。</li>
            </ul>
          </p>
          <p></p>
          <p>使用图 2 中的语法检查器练习保护 VTY 访问。</p>
          <p></p>
          <p>注：访问列表适用于经过路由器的数据包。它们并非设计用于阻止路由器内部产生的数据包。默认情况下，出站 ACL 不会阻止从路由器发起的远程访问连接。 </p>
        </div>
      </div>
      <div id="text-handle" title="调整大小" role="button"></div>
    </div>
    <div id="media-container" role="complementary">
      <iframe id="media" title="interactive graphic" aria-label="interactive graphic" aria-describedby="media-description"></iframe>
      <div id="media-description">图 1 中显示的路由器在两个千兆以太网接口上分别有一个本地网段。每个网段包括一台交换机和一台计算机。该路由器有为执行访问配置的编号为 0 至 4 的 VTY 端口。此图显示了创建限制 VTY 连接的 ACL 所需的命令。此图在全局配置模式下开始，然后使用命令 line vty 0 4 进入 vty 行。下一条命令使用命令 login local 将路由器配置为使用本地数据库进行访问。下一行将连接类型设置为允许。命令是 transport input ssh。然后，在这些行上使用命令 access-class 21 in 应用 ACL。此图使用命令 exit 从行配置模式移至全局配置模式。使用命令 access-list 21 permit 192.168.10.0 0.0.0.255 和命令 access-list 21 deny any 创建该 ACL。图 2 是允许学生在路由器上配置 vty 行以接受 ssh 的互动媒体元素。</div>
    </div>
    <div id="login">在访问该课程之前，请登录 <a href="http://netacad.com">netacad.com</a>。</div>
  </body>
</html>

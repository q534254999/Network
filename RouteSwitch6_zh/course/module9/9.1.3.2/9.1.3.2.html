<!DOCTYPE html>
<html class="loading" dir="ltr" lang="zh-Hans">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>9.1.3.2 NAT 的缺点</title>
    <!-- Content -->
    <link rel="stylesheet" type="text/css" href="../../common-ext/styles/page.css"/>
    <script type="text/javascript" src="../../common-ext/scripts/jquery-2.1.0.min.js"></script>
    <script type="text/javascript" src="../../common-ext/scripts/permission.js"></script>
    <script type="text/javascript" src="../../common-ext/scripts/page.js"></script>
    <script type="text/javascript" src="media/override.js"></script>
    <script>
      var media_transcript_file = "media_9.1.3.2_longdesc.txt";
    </script>
  </head>
  <body>
    <div id="text-container" role="main">
      <div id="text">
        <h1>NAT 的缺点</h1>
        <div>
          <p>NAT 确实有一些缺点。互联网上的主机看起来是直接与启用 NAT 设备通信，而不是与私有网络内部的实际主机通信，这一事实会造成几个问题。  </p>
          <p></p>
          <p>使用 NAT 的一个缺点就是影响网络性能，尤其是对实时协议（如 VoIP）的影响。转换数据包报头内的每个 IPv4 地址需要时间，因此 NAT 会增加转发延迟。第一个数据包始终是经过较慢路径的交换过程。路由器必须查看每个数据包，以决定是否需要转换。路由器必须更改 IPv4 报头，甚至可能要更改 TCP 或 UDP 报头。每次进行转换时，都必须重新计算 IPv4 报头校验和以及 TCP 或 UDP 校验和。如果缓存条目存在，则其余数据包经过快速交换路径；否则也会被延迟。</p>
          <p>使用 NAT 的另一个缺点是端到端编址的丢失。许多互联网协议和应用程序取决于从源到目的地的端到端编址。某些应用程序不能与 NAT 配合使用。例如，一些安全应用程序（例如数字签名）会因为源 IPv4 地址在到达目的地之前发生改变而失败。使用物理地址而非限定域名的应用无法到达经过 NAT 路由器转换的目标。有时，通过实施静态 NAT 映射可避免此问题。</p>
          <p></p>
          <p>端到端 IPv4 可追溯性也会丧失。由于经过多个 NAT 地址转换点，数据包地址已改变很多次，因此追溯数据包将更加困难，排除故障也更具挑战性。 </p>
          <p></p>
          <p>使用 NAT 也会使隧道协议的使用变得复杂，例如 IPsec，因为 NAT 会修改标头中的值，导致完整性检查失败。</p>
          <p></p>
          <p>需要外部网络发起 TCP 连接的一些服务，或者无状态协议（诸如使用 UDP 的无状态协议），可能会中断。除非对 NAT 路由器进行配置来支持此类协议，否则传入的数据包将无法到达目的地。一些协议可以支持参与通信的双方中的一方采用 NAT 机制（例如被动模式 FTP），但是当两个系统均通过 NAT 与互联网分隔时，这些协议会失败。</p>
        </div>
      </div>
      <div id="text-handle" title="调整大小" role="button"></div>
    </div>
    <div id="media-container" role="complementary">
      <iframe id="media" title="interactive graphic" aria-label="interactive graphic" aria-describedby="media-description"></iframe>
      <div id="media-description">图中列出了 NAT 的缺点。</div>
    </div>
    <div id="login">在访问该课程之前，请登录 <a href="http://netacad.com">netacad.com</a>。</div>
  </body>
</html>
